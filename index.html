<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§‹æµ·web</title>
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="theme-color" content="#000000">
    <link rel="icon" href="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%23ff0064'/%3E%3C/svg%3E" type='image/svg+xml'>
    <link rel="icon" href="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%23ff0064'/%3E%3C/svg%3E" sizes="32x32" type='image/svg+xml'>
    <link rel="icon" href="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%23ff0064'/%3E%3C/svg%3E" sizes="16x16" type='image/svg+xml'>
    <link rel="shortcut icon" href="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%23ff0064'/%3E%3C/svg%3E" type='image/svg+xml'>
    <link rel="apple-touch-icon" href="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%23ff0064'/%3E%3C/svg%3E">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- æ˜Ÿç©ºèƒŒæ™¯ -->
    <div class="stars" id="stars"></div>
    
    <!-- åƒç´ é£æœº -->
    <div class="pixel-plane plane-1"></div>
    <div class="pixel-plane plane-2"></div>
    <div class="pixel-plane plane-3"></div>
    <div class="pixel-plane plane-4"></div>
    
    <!-- æ§åˆ¶å™¨è£…é¥°ï¼ˆå·¦ä¾§ä¸ºæ¸¸æˆæœºï¼Œå³ä¾§ä¸º ABXY é”®ï¼‰ -->
    <div class="earth-container">
        <div class="earth earth-left">
            <div class="controller controller-left" aria-hidden="true">
                <div class="console">
                    <div class="console-screen"></div>
                    <div class="console-details">
                        <div class="console-vent"></div>
                        <div class="console-vent"></div>
                        <div class="console-logo">GAME</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="earth earth-right">
            <div class="controller controller-right" aria-hidden="true">
                <div class="game-keys" aria-hidden="true">
                    <div class="gkey gkey-a">A</div>
                    <div class="gkey gkey-b">B</div>
                    <div class="gkey gkey-x">X</div>
                    <div class="gkey gkey-y">Y</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ä¼˜é›…è¾¹æ¡† -->
    <div class="elegant-border">
        <div class="border-line border-top"></div>
        <div class="border-line border-bottom"></div>
        <div class="border-line border-left"></div>
        <div class="border-line border-right"></div>
        
        <!-- è§’æ ‡è£…é¥° -->
        <div class="corner corner-tl"></div>
        <div class="corner corner-tr"></div>
        <div class="corner corner-bl"></div>
        <div class="corner corner-br"></div>
    </div>
    
    <!-- éŸ³æ•ˆæç¤º -->
    <div class="sound-hint" id="soundHint">
        ğŸ”Š ç‚¹å‡»ä»»æ„ä½ç½®æ’­æ”¾éŸ³æ•ˆ
    </div>
    
    <!-- ä¸»è¦å†…å®¹ -->
    <div class="container">
        <!-- å›´ç»•æ ‡é¢˜é£è¡Œçš„å°é£æœºå®¹å™¨ -->
        <div style="position: relative; display: inline-block;">
            <h1 class="main-title">
                <span class="heart">â¤</span>ç§‹æµ·Web<span class="heart">â¤</span>
            </h1>
            <!-- å°é£æœºå…ƒç´  -->
            <div class="small-plane small-plane-1"></div>
            <div class="small-plane small-plane-2"></div>
            <div class="small-plane small-plane-3"></div>
            <div class="small-plane small-plane-4"></div>
            <div class="small-plane small-plane-5"></div>
        </div>
        
        <div class="decoration">
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
        </div>
        
        <p class="subtitle">
            ä¸€äº›å°æ¸¸æˆï¼<br>
            å†™ç€ç©çš„<br>
            *æµ·é—¨*<br>
            PCç«¯ä½“éªŒæ›´ä½³ï¼
        </p>
        
        <!-- æ¸¸æˆé€‰æ‹©æŒ‰é’® -->
        <div class="game-buttons">
            <button class="game-btn" id="snakeGameBtn">è´ªåƒè›‡æ¸¸æˆ</button>
            <button class="game-btn" id="tetrisGameBtn">ä¿„ç½—æ–¯æ–¹å—</button>
            <button class="game-btn" id="twentyFortyEightGameBtn">2048æ¸¸æˆ</button>
            <button class="game-btn" id="danmakuClassicGameBtn">å¼¹å¹•å°„å‡»-ç»å…¸æ¨¡å¼</button>
            <button class="game-btn" id="danmakuEndlessGameBtn">å¼¹å¹•å°„å‡»-æ— å°½æ¨¡å¼</button>
        </div>
    </div>
    
    <!-- é¡µè„š -->
    <div class="footer">
        <p>ç‰¹åˆ«è‡´æ•¬é¡µé¢ | è®¾è®¡äº2025å¹´12æœˆ28æ—¥</p>
    </div>
        <!-- è´ªåƒè›‡æ¸¸æˆå®¹å™¨ -->
    <div class="game-container" id="snakeGameContainer">
        <div class="game-header">
            <h2 class="game-title">è´ªåƒè›‡</h2>
            <button class="close-game" id="closeSnakeGame">Ã—</button>
        </div>
        
        <div class="game-canvas-container">
            <canvas id="snakeCanvas" class="game-canvas" width="800" height="600"></canvas>
            <div class="game-over-effect" id="snakeGameOverEffect"></div>
        </div>
        
        <div class="game-controls">
            <div class="score-display" id="snakeScore">å¾—åˆ†: 0</div>
            
            <div class="control-buttons">
                <div class="control-row">
                    <div style="width: 60px;"></div>
                    <button class="control-btn" id="snakeUp">â†‘</button>
                    <div style="width: 60px;"></div>
                </div>
                <div class="control-row">
                    <button class="control-btn" id="snakeLeft">â†</button>
                    <div style="width: 60px;"></div>
                    <button class="control-btn" id="snakeRight">â†’</button>
                </div>
                <div class="control-row">
                    <div style="width: 60px;"></div>
                    <button class="control-btn" id="snakeDown">â†“</button>
                    <div style="width: 60px;"></div>
                </div>
                <button class="control-btn pause-btn" id="snakePause">æš‚åœ/ç»§ç»­</button>
            </div>
        </div>
        
        <!-- è´ªåƒè›‡æ§åˆ¶è¯´æ˜ -->
        <div class="control-instructions">
            <div class="control-title">æ§åˆ¶è¯´æ˜</div>
            <div class="control-grid">
                <div class="control-item">
                    <div class="key">â†‘ / W</div>
                    <div class="function">å‘ä¸Šç§»åŠ¨</div>
                </div>
                <div class="control-item">
                    <div class="key">â†“ / S</div>
                    <div class="function">å‘ä¸‹ç§»åŠ¨</div>
                </div>
                <div class="control-item">
                    <div class="key">â† / A</div>
                    <div class="function">å‘å·¦ç§»åŠ¨</div>
                </div>
                <div class="control-item">
                    <div class="key">â†’ / D</div>
                    <div class="function">å‘å³ç§»åŠ¨</div>
                </div>
                <div class="control-item">
                    <div class="key">ç©ºæ ¼é”®</div>
                    <div class="function">æš‚åœ/ç»§ç»­</div>
                </div>
                <div class="control-item">
                    <div class="key">R</div>
                    <div class="function">é‡æ–°å¼€å§‹</div>
                </div>
            </div>
        </div>
        
        <div class="game-instructions">
            ä½¿ç”¨æ–¹å‘é”®æˆ–WASDæ§åˆ¶è›‡ç§»åŠ¨ï¼Œåƒåˆ°é£Ÿç‰©å¢åŠ é•¿åº¦å’Œå¾—åˆ†ï¼Œæ’åˆ°å¢™å£æˆ–è‡ªå·±èº«ä½“æ¸¸æˆç»“æŸã€‚
        </div>
    </div>
    
    <!-- ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆå®¹å™¨ -->
    <div class="game-container" id="tetrisGameContainer">
        <div class="game-header">
            <h2 class="game-title">ä¿„ç½—æ–¯æ–¹å—</h2>
            <button class="close-game" id="closeTetrisGame">Ã—</button>
        </div>
        
        <div class="game-canvas-container">
            <canvas id="tetrisCanvas" class="game-canvas" width="300" height="600"></canvas>
            <div class="game-over-effect" id="tetrisGameOverEffect"></div>
        </div>
        
        <div class="game-controls">
            <div class="score-display" id="tetrisScore">å¾—åˆ†: 0 | ç­‰çº§: 1</div>
            
            <div class="control-buttons">
                <div class="control-row">
                    <button class="control-btn" id="tetrisRotateLeft">Q/â†¶</button>
                    <div style="width: 10px;"></div>
                    <button class="control-btn" id="tetrisRotate">â†»</button>
                    <div style="width: 10px;"></div>
                    <button class="control-btn" id="tetrisRotateRight">E/â†·</button>
                </div>
                <div class="control-row">
                    <button class="control-btn" id="tetrisLeft">â†</button>
                    <div style="width: 10px;"></div>
                    <button class="control-btn" id="tetrisDown">â†“</button>
                    <div style="width: 10px;"></div>
                    <button class="control-btn" id="tetrisRight">â†’</button>
                </div>
                <div class="control-row">
                    <div style="width: 80px;"></div>
                    <button class="control-btn" id="tetrisHardDrop">ç¡¬é™</button>
                    <div style="width: 80px;"></div>
                </div>
                <button class="control-btn pause-btn" id="tetrisPause">æš‚åœ/ç»§ç»­</button>
            </div>
        </div>
        
        <!-- ä¿„ç½—æ–¯æ–¹å—æ§åˆ¶è¯´æ˜ -->
        <div class="control-instructions">
            <div class="control-title">æ§åˆ¶è¯´æ˜</div>
            <div class="control-grid">
                <div class="control-item">
                    <div class="key">â† / A</div>
                    <div class="function">å·¦ç§»</div>
                </div>
                <div class="control-item">
                    <div class="key">â†’ / D</div>
                    <div class="function">å³ç§»</div>
                </div>
                <div class="control-item">
                    <div class="key">â†“ / S</div>
                    <div class="function">åŠ é€Ÿä¸‹è½</div>
                </div>
                <div class="control-item">
                    <div class="key">â†‘ / W</div>
                    <div class="function">æ—‹è½¬æ–¹å—</div>
                </div>
                <div class="control-item">
                    <div class="key">Q / Z</div>
                    <div class="function">é€†æ—¶é’ˆæ—‹è½¬</div>
                </div>
                <div class="control-item">
                    <div class="key">E / X</div>
                    <div class="function">é¡ºæ—¶é’ˆæ—‹è½¬</div>
                </div>
                <div class="control-item">
                    <div class="key">ç©ºæ ¼é”®</div>
                    <div class="function">ç¡¬é™è½</div>
                </div>
                <div class="control-item">
                    <div class="key">P</div>
                    <div class="function">æš‚åœ/ç»§ç»­</div>
                </div>
                <div class="control-item">
                    <div class="key">R</div>
                    <div class="function">é‡æ–°å¼€å§‹</div>
                </div>
            </div>
        </div>
        
        <div class="game-instructions">
            ä½¿ç”¨æ–¹å‘é”®æˆ–WASDæ§åˆ¶æ–¹å—ç§»åŠ¨å’Œæ—‹è½¬ï¼Œå¡«æ»¡ä¸€è¡Œå³å¯æ¶ˆé™¤å¹¶å¾—åˆ†ï¼Œæ–¹å—å †åˆ°é¡¶éƒ¨æ¸¸æˆç»“æŸã€‚
        </div>
    </div>
    
    <!-- å¼¹å¹•æ¸¸æˆå®¹å™¨ -->
    <div class="game-container" id="danmakuGameContainer">
        <div class="game-header">
            <h2 class="game-title">å¼¹å¹•å°„å‡»</h2>
            <button class="close-game" id="closeDanmakuGame">Ã—</button>
        </div>
        
        <!-- æ¸¸æˆæ¨¡å¼é€‰æ‹©ç•Œé¢ -->
        <div class="game-mode-select" id="danmakuGameModeSelect">
            <h3>é€‰æ‹©æ¸¸æˆæ¨¡å¼</h3>
            <div class="mode-buttons">
                <button class="mode-btn" id="danmakuEndlessMode">æ— å°½æ¨¡å¼</button>
                <button class="mode-btn" id="danmakuClassicMode">ç»å…¸æ¨¡å¼</button>
            </div>
        </div>
        
        <div class="game-canvas-container" id="danmakuGameCanvasContainer" style="display: none;">
            <!-- BOSSè¡€æ¡ -->
            <div class="boss-health-bar" id="bossHealthBar">
                <div class="boss-health-fill" id="bossHealthFill"></div>
                <div class="boss-health-text" id="bossHealthText">BOSS: 100%</div>
            </div>
            <canvas id="danmakuCanvas" class="game-canvas" width="800" height="600"></canvas>
            <div class="game-over-effect" id="danmakuGameOverEffect"></div>
            <!-- ä»»åŠ¡å®Œæˆç•Œé¢ -->
            <div class="mission-complete" id="danmakuMissionComplete" style="display: none;">
                <div class="mission-complete-text">MISSION COMPLETE</div>
                <div class="thumbs-up">ğŸ‘</div>
                <div class="next-level-text">å‡†å¤‡è¿›å…¥ä¸‹ä¸€å…³...</div>
            </div>
            <!-- å…¨éƒ¨å…³å¡å®Œæˆç•Œé¢ -->
            <div class="all-levels-complete" id="danmakuAllLevelsComplete" style="display: none;">
                <div class="all-levels-text">æ­å–œé€šå…³ï¼</div>
                <div class="thumbs-up-big">ğŸ‘</div>
                <div class="final-score-text">æœ€ç»ˆå¾—åˆ†: <span id="danmakuFinalScore"></span></div>
            </div>
        </div>
        
        <div class="game-controls">
            <div class="score-display" id="danmakuScore">å¾—åˆ†: 0 | ç­‰çº§: 1</div>
            <div class="stats-display">
                <div class="stat" id="danmakuLives">ç”Ÿå‘½: 3</div>
                <div class="stat" id="danmakuPower">ç«åŠ›: 1</div>
                <div class="stat" id="danmakuBombs">ç‚¸å¼¹: 3</div>
                <div class="stat" id="danmakuStage">å…³å¡: 1</div>
            </div>
            
            <div class="control-buttons">
                <div class="control-row">
                    <div style="width: 60px;"></div>
                    <button class="control-btn" id="danmakuUp">â†‘</button>
                    <div style="width: 60px;"></div>
                </div>
                <div class="control-row">
                    <button class="control-btn" id="danmakuLeft">â†</button>
                    <div style="width: 60px;"></div>
                    <button class="control-btn" id="danmakuRight">â†’</button>
                </div>
                <div class="control-row">
                    <div style="width: 60px;"></div>
                    <button class="control-btn" id="danmakuDown">â†“</button>
                    <div style="width: 60px;"></div>
                </div>
                <div class="control-row">
                    <button class="control-btn special-btn" id="danmakuShoot">å°„å‡»</button>
                    <button class="control-btn special-btn" id="danmakuBomb">ç‚¸å¼¹</button>
                    <button class="control-btn special-btn" id="danmakuSlow">ä½é€Ÿ</button>
                </div>
                <button class="control-btn pause-btn" id="danmakuPause">æš‚åœ/ç»§ç»­</button>
            </div>
        </div>
        
        <!-- å¼¹å¹•æ¸¸æˆæ§åˆ¶è¯´æ˜ -->
        <div class="control-instructions">
            <div class="control-title">æ§åˆ¶è¯´æ˜</div>
            <div class="control-grid">
                <div class="control-item">
                    <div class="key">â†‘ / W</div>
                    <div class="function">å‘ä¸Šç§»åŠ¨</div>
                </div>
                <div class="control-item">
                    <div class="key">â†“ / S</div>
                    <div class="function">å‘ä¸‹ç§»åŠ¨</div>
                </div>
                <div class="control-item">
                    <div class="key">â† / A</div>
                    <div class="function">å‘å·¦ç§»åŠ¨</div>
                </div>
                <div class="control-item">
                    <div class="key">â†’ / D</div>
                    <div class="function">å‘å³ç§»åŠ¨</div>
                </div>
                <div class="control-item">
                    <div class="key">Z / ç©ºæ ¼</div>
                    <div class="function">å°„å‡»</div>
                </div>
                <div class="control-item">
                    <div class="key">X</div>
                    <div class="function">ç‚¸å¼¹</div>
                </div>
                <div class="control-item">
                    <div class="key">Shift</div>
                    <div class="function">ä½é€Ÿ</div>
                </div>
                <div class="control-item">
                    <div class="key">P</div>
                    <div class="function">æš‚åœ/ç»§ç»­</div>
                </div>
                <div class="control-item">
                    <div class="key">R</div>
                    <div class="function">é‡æ–°å¼€å§‹</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- æ’è¡Œæ¦œå…¥å£æŒ‰é’® -->
    <button class="leaderboard-btn" id="openLeaderboardBtn">ğŸ† æ’è¡Œæ¦œ</button>
    
    <!-- æ’è¡Œæ¦œå®¹å™¨ -->
    <div class="leaderboard-container" id="leaderboardContainer">
        <div class="leaderboard-header">
            <h2 class="leaderboard-title">ğŸ® æ¸¸æˆæ’è¡Œæ¦œ ğŸ†</h2>
            <button class="close-leaderboard" id="closeLeaderboard">Ã—</button>
        </div>
        
        <div class="leaderboard-tabs">
            <button class="leaderboard-tab active" data-game="snake">è´ªåƒè›‡</button>
            <button class="leaderboard-tab" data-game="tetris">ä¿„ç½—æ–¯æ–¹å—</button>
            <button class="leaderboard-tab" data-game="danmaku">å¼¹å¹•å°„å‡»</button>
            <button class="leaderboard-tab" data-game="twentyFortyEight">2048</button>
            <button class="leaderboard-tab" data-game="all">æ€»æ’è¡Œæ¦œ</button>
        </div>
        
        <div class="leaderboard-content">
            <!-- è´ªåƒè›‡æ’è¡Œæ¦œ -->
            <div class="leaderboard-table active" id="snakeLeaderboard">
                <div class="table-header">
                    <div class="rank-header">æ’å</div>
                    <div class="name-header">ç©å®¶åç§°</div>
                    <div class="score-header">å¾—åˆ†</div>
                    <div class="date-header">æ—¥æœŸ</div>
                    <div class="actions-header">æ“ä½œ</div>
                </div>
                <div class="table-body" id="snakeLeaderboardBody">
                    <!-- æ’è¡Œæ¦œæ•°æ®å°†åŠ¨æ€åŠ è½½ -->
                    <div class="no-records">æš‚æ— è®°å½•ï¼Œå¿«æ¥æˆä¸ºç¬¬ä¸€åå§ï¼</div>
                </div>
            </div>
            
            <!-- ä¿„ç½—æ–¯æ–¹å—æ’è¡Œæ¦œ -->
            <div class="leaderboard-table" id="tetrisLeaderboard">
                <div class="table-header">
                    <div class="rank-header">æ’å</div>
                    <div class="name-header">ç©å®¶åç§°</div>
                    <div class="score-header">å¾—åˆ†</div>
                    <div class="level-header">ç­‰çº§</div>
                    <div class="date-header">æ—¥æœŸ</div>
                    <div class="actions-header">æ“ä½œ</div>
                </div>
                <div class="table-body" id="tetrisLeaderboardBody">
                    <div class="no-records">æš‚æ— è®°å½•ï¼Œå¿«æ¥æˆä¸ºç¬¬ä¸€åå§ï¼</div>
                </div>
            </div>
            
            <!-- å¼¹å¹•å°„å‡»ç»å…¸æ¨¡å¼æ’è¡Œæ¦œ -->
            <div class="leaderboard-table" id="danmaku_classicLeaderboard">
                <div class="table-header">
                    <div class="rank-header">æ’å</div>
                    <div class="name-header">ç©å®¶åç§°</div>
                    <div class="score-header">å¾—åˆ†</div>
                    <div class="stage-header">å…³å¡</div>
                    <div class="date-header">æ—¥æœŸ</div>
                    <div class="actions-header">æ“ä½œ</div>
                </div>
                <div class="table-body" id="danmaku_classicLeaderboardBody">
                    <div class="no-records">æš‚æ— è®°å½•ï¼Œå¿«æ¥æˆä¸ºç¬¬ä¸€åå§ï¼</div>
                </div>
            </div>
            
            <!-- å¼¹å¹•å°„å‡»æ— å°½æ¨¡å¼æ’è¡Œæ¦œ -->
            <div class="leaderboard-table" id="danmaku_endlessLeaderboard">
                <div class="table-header">
                    <div class="rank-header">æ’å</div>
                    <div class="name-header">ç©å®¶åç§°</div>
                    <div class="score-header">å¾—åˆ†</div>
                    <div class="stage-header">å…³å¡</div>
                    <div class="date-header">æ—¥æœŸ</div>
                    <div class="actions-header">æ“ä½œ</div>
                </div>
                <div class="table-body" id="danmaku_endlessLeaderboardBody">
                    <div class="no-records">æš‚æ— è®°å½•ï¼Œå¿«æ¥æˆä¸ºç¬¬ä¸€åå§ï¼</div>
                </div>
            </div>
            
            <!-- å¼¹å¹•å°„å‡»æ’è¡Œæ¦œï¼ˆå…¼å®¹æ—§ç‰ˆæ•°æ®ï¼‰ -->
            <div class="leaderboard-table" id="danmakuLeaderboard">
                <div class="table-header">
                    <div class="rank-header">æ’å</div>
                    <div class="name-header">ç©å®¶åç§°</div>
                    <div class="score-header">å¾—åˆ†</div>
                    <div class="stage-header">å…³å¡</div>
                    <div class="date-header">æ—¥æœŸ</div>
                    <div class="actions-header">æ“ä½œ</div>
                </div>
                <div class="table-body" id="danmakuLeaderboardBody">
                    <div class="no-records">æš‚æ— è®°å½•ï¼Œå¿«æ¥æˆä¸ºç¬¬ä¸€åå§ï¼</div>
                </div>
            </div>
            
            <!-- 2048æ’è¡Œæ¦œ -->
            <div class="leaderboard-table" id="twentyFortyEightLeaderboard">
                <div class="table-header">
                    <div class="rank-header">æ’å</div>
                    <div class="name-header">ç©å®¶åç§°</div>
                    <div class="score-header">å¾—åˆ†</div>
                    <div class="date-header">æ—¥æœŸ</div>
                    <div class="actions-header">æ“ä½œ</div>
                </div>
                <div class="table-body" id="twentyFortyEightLeaderboardBody">
                    <div class="no-records">æš‚æ— è®°å½•ï¼Œå¿«æ¥æˆä¸ºç¬¬ä¸€åå§ï¼</div>
                </div>
            </div>
            
            <!-- æ€»æ’è¡Œæ¦œ -->
            <div class="leaderboard-table" id="allLeaderboard">
                <div class="table-header">
                    <div class="rank-header">æ’å</div>
                    <div class="name-header">ç©å®¶åç§°</div>
                    <div class="game-header">æ¸¸æˆ</div>
                    <div class="score-header">å¾—åˆ†</div>
                    <div class="date-header">æ—¥æœŸ</div>
                    <div class="actions-header">æ“ä½œ</div>
                </div>
                <div class="table-body" id="allLeaderboardBody">
                    <div class="no-records">æš‚æ— è®°å½•ï¼Œå¿«æ¥æˆä¸ºç¬¬ä¸€åå§ï¼</div>
                </div>
            </div>
        </div>
        
        <div class="leaderboard-controls">
            <div class="player-input">
                <input type="text" id="playerNameInput" placeholder="è¾“å…¥ä½ çš„åå­—ï¼ˆé»˜è®¤ï¼šç©å®¶ï¼‰" maxlength="12">
                <button id="saveScoreBtn" class="save-btn">ä¿å­˜å½“å‰å¾—åˆ†</button>
            </div>
            <div class="leaderboard-actions">
                <button id="exportLeaderboardBtn" class="export-btn">å¯¼å‡ºæ’è¡Œæ¦œ</button>
                <input type="file" id="importFileInput" accept=".json" style="display: none;">
            </div>
            <div class="leaderboard-stats">
                <div class="stat-item">æ€»è®°å½•æ•°: <span id="totalRecords">0</span></div>
                <div class="stat-item">ä»Šæ—¥æ–°å¢: <span id="todayRecords">0</span></div>
                <div class="stat-item">æœ€é«˜åˆ†: <span id="highestScore">0</span></div>
            </div>
        </div>
    </div>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
        <script src="script.js"></script>

    <!-- 2048æ¸¸æˆå®¹å™¨ -->
    <div class="game-container" id="twentyFortyEightGameContainer">
        <div class="game-header">
            <h2 class="game-title">2048</h2>
            <button class="close-game" id="closeTwentyFortyEightGame">Ã—</button>
        </div>
        
        <div class="game-canvas-container">
            <div class="game-stats">
                <div class="score-display">å¾—åˆ†: <span id="twentyFortyEightScore">0</span></div>
                <div class="best-display">æœ€é«˜åˆ†: <span id="twentyFortyEightBest">0</span></div>
            </div>
            <div class="game-board" id="twentyFortyEightBoard"></div>
            <div class="game-controls">
                <button class="control-btn" id="twentyFortyEightNewGame">æ–°æ¸¸æˆ</button>
                <button class="control-btn" id="twentyFortyEightUndo">æ’¤é”€</button>
            </div>
            <div class="game-instructions">
                <p>ä½¿ç”¨æ–¹å‘é”®æ§åˆ¶æ–¹å—ç§»åŠ¨ï¼Œç›¸åŒæ•°å­—çš„æ–¹å—ä¼šåˆå¹¶ï¼Œç›®æ ‡æ˜¯å¾—åˆ°2048ï¼</p>
            </div>
            <div class="game-over-effect" id="twentyFortyEightGameOverEffect"></div>
        </div>
    </div>

    <style>
        /* 2048æ¸¸æˆæ ·å¼ */
        #twentyFortyEightBoard {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 10px;
            background-color: #bbada0;
            padding: 15px;
            border-radius: 10px;
            margin: 20px auto;
            width: 400px;
            height: 400px;
        }

        .game-cell {
            background-color: #cdc1b4;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: #776e65;
            transition: all 0.3 ease;
        }

        /* ä¸åŒæ•°å€¼æ–¹å—çš„æ ·å¼ */
        .game-cell-2 {
            background-color: #eee4da;
            font-size: 32px;
        }
        .game-cell-4 {
            background-color: #ede0c8;
            font-size: 32px;
        }
        .game-cell-8 {
            background-color: #f2b179;
            color: white;
            font-size: 32px;
        }
        .game-cell-16 {
            background-color: #f59563;
            color: white;
            font-size: 32px;
        }
        .game-cell-32 {
            background-color: #f67c5f;
            color: white;
            font-size: 32px;
        }
        .game-cell-64 {
            background-color: #f65e3b;
            color: white;
            font-size: 28px;
        }
        .game-cell-128 {
            background-color: #edcf72;
            color: white;
            font-size: 28px;
            box-shadow: 0 0 10px rgba(237, 207, 114, 0.5);
        }
        .game-cell-256 {
            background-color: #edcc61;
            color: white;
            font-size: 28px;
            box-shadow: 0 0 15px rgba(237, 204, 97, 0.6);
        }
        .game-cell-512 {
            background-color: #edc850;
            color: white;
            font-size: 28px;
            box-shadow: 0 0 15px rgba(237, 200, 80, 0.7);
        }
        .game-cell-1024 {
            background-color: #edc53f;
            color: white;
            font-size: 24px;
            box-shadow: 0 0 20px rgba(237, 197, 63, 0.8);
        }
        .game-cell-2048 {
            background-color: #edc22e;
            color: white;
            font-size: 24px;
            box-shadow: 0 0 20px rgba(237, 194, 46, 1);
        }

        /* æ¸¸æˆç»Ÿè®¡ä¿¡æ¯ */
        .game-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .score-display, .best-display {
            font-size: 1.5rem;
            color: #00d9ff;
            text-shadow: 0 0 10px rgba(0, 217, 255, 0.8);
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 0, 100, 0.3);
        }

        /* æ¸¸æˆæ§åˆ¶æŒ‰é’® */
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .control-btn {
            background: rgba(74, 144, 226, 0.8);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 1.1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3 ease;
        }

        .control-btn:hover {
            background: rgba(74, 144, 226, 1);
            transform: translateY(-2px);
        }

        /* æ¸¸æˆç»“æŸæ•ˆæœ */
        .game-over-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .game-over-text {
            font-size: 4rem;
            font-weight: bold;
            color: #ff0064;
            text-shadow: 0 0 20px rgba(255, 0, 100, 0.8);
            margin-bottom: 20px;
        }

        .game-over-score {
            font-size: 2rem;
            color: #00d9ff;
            margin-bottom: 30px;
        }

        .game-over-restart {
            background: rgba(74, 144, 226, 0.8);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3 ease;
        }

        .game-over-restart:hover {
            background: rgba(74, 144, 226, 1);
            transform: translateY(-2px);
        }
    </style>

    <script>
        // 2048æ¸¸æˆå®ç°
        class TwentyFortyEightGame {
            constructor() {
                this.board = [];
                this.score = 0;
                this.best = parseInt(localStorage.getItem('2048Best')) || 0;
                this.history = [];
                this.isGameOver = false;
                this.isGameWon = false;
                
                this.init();
            }

            init() {
                // åˆå§‹åŒ–æ£‹ç›˜
                this.board = Array(4).fill().map(() => Array(4).fill(0));
                this.score = 0;
                this.history = [];
                this.isGameOver = false;
                this.isGameWon = false;
                
                // æ·»åŠ ä¸¤ä¸ªåˆå§‹æ–¹å—
                this.addRandomTile();
                this.addRandomTile();
                
                // æ›´æ–°æ˜¾ç¤º
                this.updateDisplay();
            }

            addRandomTile() {
                // æ‰¾åˆ°æ‰€æœ‰ç©ºç™½æ ¼å­
                const emptyCells = [];
                for (let i = 0; i < 4; i++) {
                    for (let j = 0; j < 4; j++) {
                        if (this.board[i][j] === 0) {
                            emptyCells.push({ x: i, y: j });
                        }
                    }
                }

                if (emptyCells.length > 0) {
                    // éšæœºé€‰æ‹©ä¸€ä¸ªç©ºç™½æ ¼å­
                    const { x, y } = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                    // 90%æ¦‚ç‡ç”Ÿæˆ2ï¼Œ10%æ¦‚ç‡ç”Ÿæˆ4
                    this.board[x][y] = Math.random() < 0.9 ? 2 : 4;
                }
            }

            move(direction) {
                if (this.isGameOver || this.isGameWon) return false;
                
                // ä¿å­˜å½“å‰çŠ¶æ€åˆ°å†å²è®°å½•
                this.saveState();
                
                let moved = false;
                
                switch (direction) {
                    case 'up':
                        moved = this.moveUp();
                        break;
                    case 'down':
                        moved = this.moveDown();
                        break;
                    case 'left':
                        moved = this.moveLeft();
                        break;
                    case 'right':
                        moved = this.moveRight();
                        break;
                }
                
                if (moved) {
                    // æ·»åŠ æ–°æ–¹å—
                    this.addRandomTile();
                    // æ›´æ–°æ˜¾ç¤º
                    this.updateDisplay();
                    // æ£€æŸ¥æ¸¸æˆç»“æŸ
                    this.checkGameOver();
                    // æ£€æŸ¥æ¸¸æˆèƒœåˆ©
                    this.checkGameWon();
                }
                
                return moved;
            }

            moveLeft() {
                let moved = false;
                
                for (let i = 0; i < 4; i++) {
                    const row = this.board[i];
                    const newRow = this.mergeRow(row);
                    
                    if (!this.arraysEqual(row, newRow)) {
                        this.board[i] = newRow;
                        moved = true;
                    }
                }
                
                return moved;
            }

            moveRight() {
                let moved = false;
                
                for (let i = 0; i < 4; i++) {
                    const row = this.board[i].reverse();
                    const newRow = this.mergeRow(row).reverse();
                    row.reverse(); // æ¢å¤åŸæ•°ç»„
                    
                    if (!this.arraysEqual(this.board[i], newRow)) {
                        this.board[i] = newRow;
                        moved = true;
                    }
                }
                
                return moved;
            }

            moveUp() {
                let moved = false;
                
                for (let j = 0; j < 4; j++) {
                    // æå–åˆ—
                    const column = [];
                    for (let i = 0; i < 4; i++) {
                        column.push(this.board[i][j]);
                    }
                    
                    const newColumn = this.mergeRow(column);
                    
                    if (!this.arraysEqual(column, newColumn)) {
                        // æ”¾å›åˆ—
                        for (let i = 0; i < 4; i++) {
                            this.board[i][j] = newColumn[i];
                        }
                        moved = true;
                    }
                }
                
                return moved;
            }

            moveDown() {
                let moved = false;
                
                for (let j = 0; j < 4; j++) {
                    // æå–åˆ—
                    const column = [];
                    for (let i = 0; i < 4; i++) {
                        column.push(this.board[i][j]);
                    }
                    
                    const reversedColumn = column.reverse();
                    const newReversedColumn = this.mergeRow(reversedColumn);
                    const newColumn = newReversedColumn.reverse();
                    
                    if (!this.arraysEqual(column, newColumn)) {
                        // æ”¾å›åˆ—
                        for (let i = 0; i < 4; i++) {
                            this.board[i][j] = newColumn[i];
                        }
                        moved = true;
                    }
                }
                
                return moved;
            }

            mergeRow(row) {
                // ç§»é™¤ç©ºæ ¼
                const filtered = row.filter(cell => cell !== 0);
                
                // åˆå¹¶ç›¸åŒæ•°å­—
                for (let i = 0; i < filtered.length - 1; i++) {
                    if (filtered[i] === filtered[i + 1]) {
                        filtered[i] *= 2;
                        this.score += filtered[i];
                        filtered.splice(i + 1, 1);
                    }
                }
                
                // è¡¥é›¶
                while (filtered.length < 4) {
                    filtered.push(0);
                }
                
                return filtered;
            }

            arraysEqual(a, b) {
                if (a.length !== b.length) return false;
                for (let i = 0; i < a.length; i++) {
                    if (a[i] !== b[i]) return false;
                }
                return true;
            }

            saveState() {
                this.history.push({
                    board: this.board.map(row => [...row]),
                    score: this.score
                });
                
                // é™åˆ¶å†å²è®°å½•é•¿åº¦
                if (this.history.length > 10) {
                    this.history.shift();
                }
            }

            undo() {
                if (this.history.length > 0) {
                    const state = this.history.pop();
                    this.board = state.board.map(row => [...row]);
                    this.score = state.score;
                    this.isGameOver = false;
                    this.isGameWon = false;
                    this.updateDisplay();
                }
            }

            checkGameWon() {
                if (this.isGameWon) return;
                
                for (let i = 0; i < 4; i++) {
                    for (let j = 0; j < 4; j++) {
                        if (this.board[i][j] === 2048) {
                            this.isGameWon = true;
                            this.showGameWon();
                            return;
                        }
                    }
                }
            }

            checkGameOver() {
                if (this.isGameOver) return;
                
                // æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ç©ºç™½æ ¼å­
                for (let i = 0; i < 4; i++) {
                    for (let j = 0; j < 4; j++) {
                        if (this.board[i][j] === 0) {
                            return;
                        }
                    }
                }
                
                // æ£€æŸ¥æ˜¯å¦è¿˜èƒ½åˆå¹¶
                for (let i = 0; i < 4; i++) {
                    for (let j = 0; j < 4; j++) {
                        const current = this.board[i][j];
                        
                        // æ£€æŸ¥å³ä¾§
                        if (j < 3 && current === this.board[i][j + 1]) {
                            return;
                        }
                        
                        // æ£€æŸ¥ä¸‹æ–¹
                        if (i < 3 && current === this.board[i + 1][j]) {
                            return;
                        }
                    }
                }
                
                // æ¸¸æˆç»“æŸ
                this.isGameOver = true;
                this.showGameOver();
            }

            showGameWon() {
                // è®¾ç½®å½“å‰åˆ†æ•°åˆ°æ’è¡Œæ¦œç³»ç»Ÿ
                if (window.leaderboardSystem) {
                    window.leaderboardSystem.setCurrentScore('twentyFortyEight', this.score);
                }
                // ä½¿ç”¨å…¨å±€çš„Game Overæ•ˆæœ
                createGameOverEffect('twentyFortyEight', this.score);
            }

            showGameOver() {
                // è®¾ç½®å½“å‰åˆ†æ•°åˆ°æ’è¡Œæ¦œç³»ç»Ÿ
                if (window.leaderboardSystem) {
                    window.leaderboardSystem.setCurrentScore('twentyFortyEight', this.score);
                }
                // ä½¿ç”¨å…¨å±€çš„Game Overæ•ˆæœ
                createGameOverEffect('twentyFortyEight', this.score);
            }

            updateDisplay() {
                // æ›´æ–°åˆ†æ•°
                document.getElementById('twentyFortyEightScore').textContent = this.score;
                
                // æ›´æ–°æœ€é«˜åˆ†
                if (this.score > this.best) {
                    this.best = this.score;
                    localStorage.setItem('2048Best', this.best);
                }
                document.getElementById('twentyFortyEightBest').textContent = this.best;
                
                // æ›´æ–°æ£‹ç›˜
                const boardElement = document.getElementById('twentyFortyEightBoard');
                boardElement.innerHTML = '';
                
                for (let i = 0; i < 4; i++) {
                    for (let j = 0; j < 4; j++) {
                        const cell = document.createElement('div');
                        cell.className = `game-cell ${this.board[i][j] !== 0 ? 'game-cell-' + this.board[i][j] : ''}`;
                        cell.textContent = this.board[i][j] || '';
                        boardElement.appendChild(cell);
                    }
                }
                
                // ç§»é™¤å·²å­˜åœ¨çš„æ¸¸æˆç»“æŸæ•ˆæœ
                const existingOverlay = document.querySelector('.game-over-overlay');
                if (existingOverlay) {
                    existingOverlay.remove();
                }
            }

            newGame() {
                this.init();
            }

            stop() {
                // 2048æ¸¸æˆä¸éœ€è¦åœæ­¢å¾ªç¯
            }
        }

        // åˆå§‹åŒ–2048æ¸¸æˆ
        let twentyFortyEightGame;
        
        // æ·»åŠ é”®ç›˜äº‹ä»¶ç›‘å¬å™¨
        function enable2048KeyListeners() {
            document.addEventListener('keydown', handle2048KeyDown);
        }
        
        function handle2048KeyDown(e) {
            if (!twentyFortyEightGame) return;
            
            let moved = false;
            const key = e.key.toLowerCase();
            switch (key) {
                case 'arrowup':
                case 'w':
                    moved = twentyFortyEightGame.move('up');
                    break;
                case 'arrowdown':
                case 's':
                    moved = twentyFortyEightGame.move('down');
                    break;
                case 'arrowleft':
                case 'a':
                    moved = twentyFortyEightGame.move('left');
                    break;
                case 'arrowright':
                case 'd':
                    moved = twentyFortyEightGame.move('right');
                    break;
            }
            
            if (moved) {
                e.preventDefault();
            }
        }
        
        // æ¸¸æˆæŒ‰é’®äº‹ä»¶
        document.getElementById('twentyFortyEightGameBtn').addEventListener('click', () => {
            document.getElementById('twentyFortyEightGameContainer').style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            if (!twentyFortyEightGame) {
                twentyFortyEightGame = new TwentyFortyEightGame();
            } else {
                twentyFortyEightGame.newGame();
            }
            
            enable2048KeyListeners();
        });
        
        // å…³é—­æ¸¸æˆæŒ‰é’®äº‹ä»¶
        document.getElementById('closeTwentyFortyEightGame').addEventListener('click', () => {
            document.getElementById('twentyFortyEightGameContainer').style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // ç§»é™¤é”®ç›˜äº‹ä»¶ç›‘å¬å™¨
            document.removeEventListener('keydown', handle2048KeyDown);
        });
        
        // æ–°æ¸¸æˆæŒ‰é’®äº‹ä»¶
        document.getElementById('twentyFortyEightNewGame').addEventListener('click', () => {
            if (twentyFortyEightGame) {
                twentyFortyEightGame.newGame();
            }
        });
        
        // æ’¤é”€æŒ‰é’®äº‹ä»¶
        document.getElementById('twentyFortyEightUndo').addEventListener('click', () => {
            if (twentyFortyEightGame) {
                twentyFortyEightGame.undo();
            }
        });
        
        // ESCé”®å…³é—­æ¸¸æˆ
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const container = document.getElementById('twentyFortyEightGameContainer');
                if (container.style.display === 'flex') {
                    document.getElementById('closeTwentyFortyEightGame').click();
                }
            }
        });
    </script>
</body>

</html>


